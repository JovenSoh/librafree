(this.webpackJsonplibrafree=this.webpackJsonplibrafree||[]).push([[0],{158:function(e,t){},160:function(e,t){},162:function(e,t){},194:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=194},213:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=213},235:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n(107),a=n.n(c),o=n(28),i=n(108),s=n.n(i);var l=function(e){var t=e.getContext("2d").getImageData(0,0,e.width,e.height);return function(e,t){void 0===t&&(t=.5);for(var n=Math.floor(255*t),r=0;r<e.length;r+=4){var c=void 0;c=.2126*e[r]+.7152*e[r+1]+.0722*e[r+2]>=n?255:0,e[r]=e[r+1]=e[r+2]=c}}(t.data,.5),t};var u=n(109),h=n.n(u);var j=function(e){var t,n,r,c,a;if(10!=(e=e.replace(/[^0-9X]/gi,"")).length&&13!=e.length)return!1;if(13==e.length){for(t=0,a=0;a<12;a++)r=parseInt(e[a]),t+=a%2==1?3*r:r;return(c=(10-t%10)%10)==e[e.length-1]}if(10==e.length){for(n=10,t=0,a=0;a<9;a++)t+=n*(r=parseInt(e[a])),n--;return 10==(c=(11-t%11)%11)&&(c="X"),c==e[e.length-1].toUpperCase()}},f=(n(235),n(4)),d=n(237);var g=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],g=i[1],b=Object(r.useState)(""),O=Object(o.a)(b,2),p=O[0],v=O[1],x=Object(r.useState)(""),m=Object(o.a)(x,2),w=m[0],y=m[1],C=Object(r.useState)(""),N=Object(o.a)(C,2),U=N[0],R=N[1],D=Object(r.useRef)(null),I=Object(r.useRef)(null),S=function(e){console.log("Text: ",e);for(var t=e.replace(/[^0-9]/g,""),n=0;n<t.length-12;n++){var r=t.substr(n,13).toString();if(9==r[0]&&j(r)){v(r);var c=r}}var a=d.get("https://openlibrary.org/isbn/".concat(c,".json"));a.then((function(e){R(e.data.title);var t=e.data.authors[0].key;return(a=d.get("https://openlibrary.org".concat(t,".json"))).then((function(e){y(e.data.name)}))}));var o={mirror:"http://libgen.is",query:U,count:5,sort_by:"year",reverse:!0};h.a.search(o,(function(e,t){console.log("hello")}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:" OCR "}),Object(f.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){return function(e){c(URL.createObjectURL(e.target.files[0])),console.log("file:",e.target.files[0])}(e)}}),Object(f.jsx)("button",{onClick:function(e){return function(){var e=D.current;e.height=I.current.naturalHeight,e.width=I.current.naturalWidth;var t=e.getContext("2d");console.log("imageRef: ",I),t.clearRect(0,0,e.width,e.height),t.drawImage(I.current,0,0),t.putImageData(l(e),0,0);var n=e.toDataURL("image/jpeg");s.a.recognize(n,"eng",{logger:function(e){return console.log(e)},langPath:"https://tessdata.projectnaptha.com/4.0.0_best/eng.traineddata.gz"}).catch((function(e){console.error(e)})).then((function(e){g(e.data.text),S(e.data.text)}))}()},children:"Upload"}),Object(f.jsxs)("div",{className:"ocr",children:[Object(f.jsxs)("div",{className:"ocr-col1",children:[Object(f.jsx)("h3",{children:"Chosen picture"}),Object(f.jsx)("img",{src:n,ref:I,className:"App-img"}),function(){if(n)return Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Text: ",u]}),Object(f.jsxs)("p",{children:["Title: ",U," "]}),Object(f.jsxs)("p",{children:["Author: ",w," "]}),Object(f.jsxs)("p",{children:["ISBN: ",p]})]})}()]}),Object(f.jsxs)("div",{className:"ocr-col2",children:[Object(f.jsx)("h3",{children:"Canvas"}),Object(f.jsx)("canvas",{ref:D})]})]})]})};a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.b1a11bfa.chunk.js.map